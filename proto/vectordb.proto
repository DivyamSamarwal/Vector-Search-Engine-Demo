syntax = "proto3";

package vectordb;

service VectorDb {
  rpc Upsert (VectorMsg) returns (SuccessMsg);
  rpc Search (QueryMsg) returns (NeighborsMsg);
}

message VectorMsg {
  uint32 id = 1;
  repeated float values = 2;
}

message SuccessMsg {
  bool success = 1;
  string message = 2;
}

message QueryMsg {
  repeated float values = 1;
  uint32 k = 2; // Number of neighbors to find
}

message Neighbor {
  uint32 id = 1;
  float score = 2;
}

message NeighborsMsg {
  repeated Neighbor neighbors = 1;
}
